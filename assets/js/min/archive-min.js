!function($){"use strict";$(document).ready(function(){function t(){var t=new google.maps.LatLng(32.7792,-117.1724),e={zoom:12,center:t,mapTypeId:google.maps.MapTypeId.TERRAIN},a=new google.maps.Map(document.getElementById("units-map"),e);o(a),window.map=a}function o(t){for(var o=0;o<window.apts.length;o++)if(window.apts[o].meta.lat[0]){var n=a(window.apts[o]),i=new google.maps.LatLng(window.apts[o].meta.lat[0],window.apts[o].meta.lon[0]),s=new google.maps.Marker({position:i});window.markers.push(s),s.id=window.apts[o].ID,s.my_html=n,s.setMap(t);var l=new google.maps.InfoWindow({content:s.my_html});google.maps.event.addListener(s,"click",function(){l.setContent(this.my_html),l.open(t,this)}),s.infowindow=l}e(t)}function e(t){var o=new google.maps.LatLngBounds;$.each(window.markers,function(t,e){o.extend(e.position)}),t.fitBounds(o)}function a(t){var o="<div class='map-infowindow'>";return o+="<div class='image'><a href='"+t.meta.permalink+"'><img src="+t.meta.mini_thumb+" width='80' height='55' alt='map image' /></a></div>",o+="<div class='info'>",o+="<address><a href='"+t.meta.permalink+"'>"+t.meta.address[0]+"</a></address>",o+="<div class='rent'>$"+t.meta.rent+"</div>",o+="<div class='brba'>"+t.meta.bedrooms+" bed / "+t.meta.bathrooms+" bath</div>",o+="</div>"}function n(t){var o=new google.maps.LatLng(t.lat,t.lng);map.setZoom(18),map.panTo(o)}$("#floating-list a[href*=#]").on("click",function(t){t.preventDefault(),$("html,body").animate({scrollTop:$(this.hash).offset().top-75},500),$("#floating-list li").removeClass("selected"),$(this).parent("li").addClass("selected")}),$("#floating-list").css({height:$(window).innerHeight()-70,overflow:"auto"});var i=$(".wppm-head").offset().top;$(window).scroll(function(){var t=$(document).scrollTop();t>=i&&$(".wppm-head").css({position:"fixed",top:"0px","border-bottom":"1px solid #BBBBBB"}),i>=t&&$(".wppm-head").css({position:"absolute",top:"0px","border-bottom":"0px"})});var s=$("#floating-list").offset().top-65,l=$(".article-wrap").height()-$("#floating-list").height()+$("#floating-list").offset().top-55;$(window).scroll(function(){var t=$(document).scrollTop();if(t>=s&&l>t&&t>0){var o=t-s;$("#floating-list").css({top:o+"px"})}10>=t&&$("#floating-list").css({top:"0px"})}),$(".btn-wppm").on("click",function(){var o=$(this).attr("id");$(".btn-wppm").removeClass("selected"),$(this).addClass("selected"),$(".archive-content-section").fadeOut("fast"),$("#"+o+"-content").fadeIn("fast"),$(document).scrollTop(0),"map-view"===o&&t()}),$("#floating-map-list a").on("click",function(t){t.preventDefault(),$("#floating-map-list li").removeClass("selected"),$(this).parent("li").addClass("selected");var o=JSON.parse($(this).attr("data")),e,a;for(a in window.markers)window.markers[a].infowindow.close(),window.markers[a].id==o.id&&(window.markers[a].infowindow.setContent(window.markers[a].my_html),window.markers[a].infowindow.open(window.map,window.markers[a]));n(o)}),$(".listingAge").tooltip(),window.onunload=google.maps.Unload})}(jQuery);